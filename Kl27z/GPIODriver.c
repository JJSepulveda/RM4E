/*
 * GPIODriver..c
 *
 *  Created on: 1 oct 2019
 *      Author: JJ
 */
///////////////////////////////////////////////////////////////////////////////////////////////////
//                                      Includes Section
///////////////////////////////////////////////////////////////////////////////////////////////////
#include "MKL27Z644.h"

#include "GPIODriver.h"

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Defines & Macros Section
///////////////////////////////////////////////////////////////////////////////////////////////////

#define MAX_GPIO_MODULES 		(5)

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                       Typedef Section
///////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                  Function Prototypes Section
///////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Global Constants Section
///////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Static Constants Section
///////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Global Variables Section
///////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Static Variables Section
///////////////////////////////////////////////////////////////////////////////////////////////////

static GPIO_Type * const gpdwaGPIOModule[MAX_GPIO_MODULES] =
{
        GPIOA,
		GPIOB,
		GPIOC,
		GPIOD,
		GPIOE
};


///////////////////////////////////////////////////////////////////////////////////////////////////
//                                      Functions Section
///////////////////////////////////////////////////////////////////////////////////////////////////

/*
 * PDDR -> Port Data Direction register.
 * 0 means the port it is a input.
 * 1 means the port it is a output.
 * */

void vfnGPIODriver_Mode(uint8_t bGPIOModule, uint8_t bGPIONumber, uint8_t bMode)
{
	if(bGPIOModule < MAX_GPIO_MODULES)
	{
		/* Reset the position*/
		gpdwaGPIOModule[bGPIOModule]->PDDR &= ~(1 << bGPIONumber);

		/* Set mode */
		gpdwaGPIOModule[bGPIOModule]->PDDR |= bMode << bGPIONumber;
	}
}

void vfnGPIODriver_WritePin(uint8_t bGPIOModule, uint8_t bGPIONumber, uint8_t bMode)
{
	if(bGPIOModule >= MAX_GPIO_MODULES)
	{
		return;
	}

	if(bMode)
	{
		gpdwaGPIOModule[bGPIOModule]->PSOR |= 1 << bGPIONumber;
	}
	else
	{
		gpdwaGPIOModule[bGPIOModule]->PCOR |= 1 << bGPIONumber;
	}

}

uint8_t bfnGPIODriver_ReadPin(uint8_t bGPIOModule, uint8_t bGPIONumber)
{
	uint8_t bValue;

	if(bGPIOModule < MAX_GPIO_MODULES)
	{
		bValue = (gpdwaGPIOModule[bGPIOModule]->PDIR & (1 << bGPIONumber));
	}

	return (bValue>>bGPIONumber);
}
///////////////////////////////////////////////////////////////////////////////////////////////////
// EOF
///////////////////////////////////////////////////////////////////////////////////////////////////
